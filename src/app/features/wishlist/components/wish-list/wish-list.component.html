<section class="w-[90%] mx-auto py-12">
  <h2 class="text-4xl font-bold text-center text-gray-800 mb-10">
    Your Wishlist ‚ù§Ô∏è
  </h2>
  <div *ngIf="wishList.length === 0" class="flex flex-col items-center">
    <img
      src="images/Wishlist.png"
      alt="Empty Wishlist"
      class="w-80 max-w-full mb-6"
    />
    <p class="text-lg text-gray-500">Your wishlist is empty. Start adding products!</p>
  </div>
  <div
    *ngIf="wishList.length > 0; else emptyState"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-10"
  >
    <!-- <div
      *ngFor="let item of wishList; trackBy: trackById"
      class="relative bg-white shadow-xl rounded-xl overflow-hidden transition-transform duration-500 hover:-translate-y-3 hover:shadow-2xl"
    >

      <div class="relative">
        <img
          [src]="item.imageCover"
          class="w-full h-56 object-cover rounded-t-xl"
          alt="Product"
        />

        <span
          class="absolute top-3 left-3 bg-green-500 text-white px-3 py-1 text-xs font-semibold rounded-full shadow-md"
        >
          {{ item.category.name | uppercase }}
        </span>
      </div>

      <div class="p-5 text-center">
        <h3 class="text-lg font-bold text-gray-700 truncate">
          {{ item.name }}
        </h3>

        <p class="text-xl font-semibold text-green-600 mt-2">
          {{ item.price | currency : "EUR" : "symbol-narrow" }}
        </p>

        <div class="flex justify-center gap-6 mt-4">
          <button
            (click)="removeFromWishlist(item.id)"
            class="text-red-500 text-2xl transition-all duration-300 hover:text-red-700"
          >
            <i class="fa-solid fa-trash"></i>
          </button>

          <button
            (click)="loadWishlist()"
            class="text-green-500 text-2xl transition-all duration-300 hover:text-green-700"
          >
            <i class="fa-solid fa-cart-plus"></i>
          </button>
        </div>
      </div>
    </div> -->
    <div class="card" *ngFor="let product of wishList; trackBy: trackById">
  <div class="rounded-lg shadow cursor-pointer group relative mb-2">
    <img [src]="product.imageCover" class="w-90" alt="{{ product.title }}" />

    <!-- ÿ≤ÿ±ÿßÿ± ÿ≠ÿ∞ŸÅ ŸÖŸÜ wishlist -->
    <i
      (click)="removeFromWishlist(product._id)"
      class="fa-solid fa-trash shadow p-2 rounded-full absolute top-3 right-3 bg-white hover:bg-red-500 hover:text-white"
    ></i>

    <!-- ÿ≤ÿ±ÿßÿ± details -->
    <i
      [routerLink]="['/product-details', product._id]"
      class="fa-regular fa-eye shadow p-2 rounded-full absolute top-12 right-3 bg-white hover:bg-main hover:text-white"
    ></i>
  </div>

  <div class="info">
    <div class="cat">{{ product.category?.name }}</div>
    <h2 class="title line-clamp-1">{{ product.title }}</h2>
    <p class="desc line-clamp-1">{{ product.description }}</p>

    <div class="feats">
      <span class="feat">{{ product.brand?.name }}</span>
      <span class="feat line-clamp-1">{{ product.slug }}</span>
      <span class="feat">{{ product.category?.name }}</span>
    </div>

    <div class="bottom">
      <div class="price">
        <span class="new">{{ product.price | currency : "GBP" }}</span>
      </div>

      <button class="btn" (click)="onAddToCart(product._id)">
        <span>Add to Cart</span>
        <svg
          class="icon"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4" />
          <line x1="3" y1="6" x2="21" y2="6" />
          <path d="M16 10a4 4 0 01-8 0" />
        </svg>
      </button>
    </div>

    <div class="meta">
      <div class="rating">
        <ng-container *ngFor="let star of [1,2,3,4,5]">
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            [attr.fill]="star <= product.ratingsAverage ? '#FFD700' : '#E0E0E0'"
            stroke="#FFD700"
            stroke-width="0.5"
          >
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
            />
          </svg>
        </ng-container>
        <span class="rcount">{{ product.ratingsAverage }} Reviews</span>
      </div>
      <div class="stock">In Stock</div>
    </div>
  </div>
</div>

  </div>


  <ng-template #emptyState>
    <div class="text-center text-gray-500 text-xl">
      Your wishlist is empty üõí
    </div>
  </ng-template>


  <!-- <div class="text-center mt-10" *ngIf="wishList.length > 0">
    <button
      (click)="clearAll()"
      class="px-6 py-2 bg-red-600 text-white rounded-lg shadow-md hover:bg-red-700 transition"
    >
      Clear All
    </button>
  </div> -->
</section>
